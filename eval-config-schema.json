{
  "type": "object",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MCP Evaluation Configuration",
  "description": "Configuration schema for running evaluations against Model Context Protocol (MCP) servers",
  "required": [
    "model",
    "mcp_server",
    "evals"
  ],
  "properties": {
    "evals": {
      "type": "array",
      "description": "List of evaluation test cases to run",
      "items": {
        "type": "object",
        "required": [
          "name",
          "prompt"
        ],
        "properties": {
          "description": {
            "type": "string",
            "description": "Human-readable description of what this eval tests"
          },
          "expected_result": {
            "type": "string",
            "description": "Expected behavior or result (used for documentation and grading context)"
          },
          "name": {
            "type": "string",
            "description": "Unique identifier for this evaluation"
          },
          "prompt": {
            "type": "string",
            "description": "The input prompt to send to the LLM"
          }
        },
        "additionalProperties": false
      }
    },
    "grading_model": {
      "type": "string",
      "description": "Anthropic model ID to use for grading (defaults to same as model)"
    },
    "max_steps": {
      "type": "integer",
      "description": "Maximum number of agentic loop iterations",
      "default": 10,
      "minimum": 1,
      "maximum": 100
    },
    "max_tokens": {
      "type": "integer",
      "description": "Maximum tokens per LLM request",
      "default": 4096,
      "minimum": 1,
      "maximum": 20000
    },
    "mcp_server": {
      "type": "object",
      "description": "Configuration for the MCP server to evaluate",
      "required": [
        "command"
      ],
      "properties": {
        "args": {
          "type": "array",
          "description": "Arguments to pass to the command",
          "items": {
            "type": "string"
          }
        },
        "command": {
          "type": "string",
          "description": "Command to start the MCP server"
        },
        "env": {
          "type": "array",
          "description": "Environment variables to set for the MCP server",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "model": {
      "type": "string",
      "description": "Anthropic model ID to use for evaluations"
    },
    "timeout": {
      "type": "string",
      "description": "Timeout duration for each evaluation (e.g., '2m', '30s')"
    }
  },
  "additionalProperties": false
}
